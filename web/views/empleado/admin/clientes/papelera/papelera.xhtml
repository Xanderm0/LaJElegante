<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Papelera de Clientes</title>
     <h:outputStylesheet library="bootstrap" name="css/bootstrap.min.css" />
</h:head>

<h:body>

<h:form id="formPapelera">

    <p:card header="Papelera de Clientes">

        <!-- Mensajes -->
        <p:messages id="msg" closable="true" showSummary="true" />

        
        <!-- Si hay datos -->
        <p:panel rendered="#{not empty clienteBean.listaEliminados}">

            <p:dataTable value="#{clienteBean.listaEliminados}"
                         var="cliente"
                         paginator="true"
                         rows="10"
                         responsiveLayout="scroll"
                         emptyMessage="No hay clientes en la papelera">

                <p:column headerText="ID">
                    <h:outputText value="#{cliente.id_cliente}" />
                </p:column>

                <p:column headerText="Nombre">
                    <h:outputText value="#{cliente.nombre}" />
                </p:column>

                <p:column headerText="Email">
                    <h:outputText value="#{cliente.email_info}" />
                </p:column>

                <p:column headerText="TelÃ©fono">
                    <h:outputText value="#{cliente.numero_telefono}" />
                </p:column>

                <p:column headerText="Eliminado en">
                    <h:outputText value="#{cliente.deleted_at}">
                        <f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
                    </h:outputText>
                </p:column>


                <!-- ACCIONES -->
                <p:column headerText="Acciones">

                    <!-- Restaurar -->
                    <p:commandButton value="Restaurar"
                                     icon="pi pi-refresh"
                                     styleClass="ui-button-success ui-button-sm"
                                     update="@form"
                                     action="#{clienteBean.restaurar(cliente.id_cliente)}" />
                </p:column>

            </p:dataTable>

            <br/>

            <p:commandButton value="Volver al listado"
                             icon="pi pi-arrow-left"
                             action="listaClientes.xhtml?faces-redirect=true"
                             styleClass="ui-button-secondary"/>
        
        </p:panel>


        <!-- SI NO EXISTEN CLIENTES -->
        <p:panel rendered="#{empty clienteBean.listaEliminados}" style="text-align:center">

            <p:message severity="info" text="No hay clientes en la papelera."/>
            <br/><br/>

            <p:commandButton value="Volver al listado"
                             icon="pi pi-arrow-left"
                             action="listaClientes.xhtml?faces-redirect=true"
                             styleClass="ui-button-secondary"/>
        </p:panel>

    </p:card>

</h:form>
<h:outputScript library="bootstrap" name="js/bootstrap.bundle.min.js" />
</h:body>
</html>