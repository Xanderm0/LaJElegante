<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Listado de Clientes</title>
     <h:outputStylesheet library="bootstrap" name="css/bootstrap.min.css" />
</h:head>

<h:body>

<h:form id="formClientes">

    <p:card header="Listado de Clientes">

        <!-- Mensaje de éxito -->
        <p:messages id="mensajes" closable="true" showSummary="true"/>

        <!-- Botón nuevo cliente -->
        <p:commandButton value="Nuevo Cliente"
                         icon="pi pi-plus"
                         action="nuevoCliente.xhtml?faces-redirect=true"
                         styleClass="ui-button-primary"
                         style="margin-bottom:15px"/>

        <!-- Tabla de clientes -->
        <p:dataTable id="tablaClientes"
                     value="#{clienteBean.listaClientes}"
                     var="cliente"
                     paginator="true"
                     rows="10"
                     emptyMessage="No hay clientes registrados"
                     responsiveLayout="scroll">

            <p:column headerText="ID">
                <h:outputText value="#{cliente.id_cliente}" />
            </p:column>

            <p:column headerText="Nombre completo">
                <h:outputText value="#{cliente.nombre} #{cliente.apellido}" />
            </p:column>

            <p:column headerText="Email">
                <h:outputText value="#{cliente.email_info}" />
            </p:column>

            <p:column headerText="Teléfono">
                <h:outputText value="#{cliente.numero_telefono}" />
            </p:column>

            <p:column headerText="Tipo Cliente">
                <h:outputText value="#{cliente.tipoCliente.nombre_tipo != null ? cliente.tipoCliente.nombre_tipo : 'Sin tipo'}" />
            </p:column>

            <p:column headerText="Estado">
                <h:outputText value="#{cliente.estado}" />
            </p:column>

            <!-- ACCIONES -->
            <p:column headerText="Acciones" style="width:220px">

                <!-- Botón ver -->
                <p:commandButton value="Ver"
                                 icon="pi pi-eye"
                                 action="#{clienteBean.ver(cliente.id_cliente)}"
                                 styleClass="ui-button-info ui-button-sm"
                                 update="@form"/>

                &nbsp;

                <!-- Botón editar -->
                <p:commandButton value="Editar"
                                 icon="pi pi-pencil"
                                 action="#{clienteBean.editar(cliente.id_cliente)}"
                                 styleClass="ui-button-warning ui-button-sm"
                                 update="@form"/>

                &nbsp;

                <!-- Botón eliminar -->
                <p:commandButton value="Eliminar"
                                 icon="pi pi-trash"
                                 action="#{clienteBean.eliminar(cliente.id_cliente)}"
                                 styleClass="ui-button-danger ui-button-sm"
                                 update="@form"
                                 onclick="return confirm('¿Seguro que deseas eliminar este cliente?')"/>

            </p:column>

        </p:dataTable>

    </p:card>

</h:form>
<h:outputScript library="bootstrap" name="js/bootstrap.bundle.min.js" />
</h:body>
</html>