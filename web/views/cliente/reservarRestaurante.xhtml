<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Reservar Restaurante</title>
</h:head>

<h:body>

<h:form>

    <h2>Reserva de Restaurante</h2>

    <p:panel header="Datos de bÃºsqueda">

        <p:panelGrid columns="2">

            <h:outputLabel value="Fecha:" />
            <p:calendar value="#{clienteReservaRestauranteBean.fechaReserva}"
                        pattern="dd/MM/yyyy" />

            <h:outputLabel value="Turno:" />
            <p:selectOneMenu value="#{clienteReservaRestauranteBean.turno}">
                <f:selectItem itemLabel="Seleccione" itemValue="" />
                <f:selectItem itemLabel="MaÃ±ana" itemValue="MANANA" />
                <f:selectItem itemLabel="Tarde" itemValue="TARDE" />
                <f:selectItem itemLabel="Noche" itemValue="NOCHE" />
            </p:selectOneMenu>

            <h:outputLabel value="Personas:" />
            <p:spinner min="1"
                       value="#{clienteReservaRestauranteBean.cantidadPersonas}" />

        </p:panelGrid>

        <p:commandButton value="Buscar mesas"
                         action="#{clienteReservaRestauranteBean.buscarMesasDisponibles}"
                         update="@form" />

    </p:panel>

    <br/>

    <p:dataTable value="#{clienteReservaRestauranteBean.mesasDisponibles}"
                 var="m"
                 rendered="#{not empty clienteReservaRestauranteBean.mesasDisponibles}">

        <p:column headerText="Mesa">
            #{m.numero}
        </p:column>

        <p:column headerText="Capacidad">
            #{m.capacidad}
        </p:column>

        <p:column>
            <p:commandButton value="Seleccionar"
                             action="#{clienteReservaRestauranteBean.setIdMesaSeleccionada(m.idMesa)}"
                             update="@form" />
        </p:column>

    </p:dataTable>

    <br/>

    <p:commandButton value="Confirmar reserva"
                     action="#{clienteReservaRestauranteBean.reservar}"
                     rendered="#{clienteReservaRestauranteBean.idMesaSeleccionada > 0}" />

    <br/><br/>

    <p:button value="Volver"
              icon="pi pi-arrow-left"
              outcome="/views/cliente/misReservas" />

</h:form>

</h:body>
</html>
